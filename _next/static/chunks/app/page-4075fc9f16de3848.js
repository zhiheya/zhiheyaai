(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{33022:(e,t,l)=>{"use strict";l.d(t,{default:()=>eA});var n=l(95155),s=l(12115),i=l(55028),r=l(85398),o=l(63066),a=l(11168),c=l(47259),d=l(67453),x=l(32277),h=l(70445),u=l(26922),p=l(77325),g=l(17238),j=l(46002),m=l(72070),C=l(19868),y=l(97605),A=l(97226),k=l(46996),v=l(79659),f=l(56170),b=l(15260),w=l(62983),S=l(85359),R=l(16253),N=l(31601),z=l(70129),T=l(68287),B=l(50881);l(79911);var P=l(12556);let _=e=>{let{size:t=20}=e;return(0,n.jsx)("svg",{width:t,height:t,viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:(0,n.jsx)("path",{id:"path",d:"M48.8354 10.0479C48.3232 9.79199 48.1025 10.2798 47.8032 10.5278C47.7007 10.6079 47.6143 10.7119 47.5273 10.8076C46.7793 11.624 45.9048 12.1597 44.7622 12.0957C43.0923 12 41.666 12.5356 40.4058 13.8398C40.1377 12.2319 39.2476 11.272 37.8926 10.6558C37.1836 10.3359 36.4668 10.0156 35.9702 9.31982C35.6235 8.82373 35.5293 8.27197 35.356 7.72754C35.2456 7.3999 35.1353 7.06396 34.7651 7.00781C34.3633 6.94385 34.2056 7.2876 34.0479 7.57568C33.418 8.75195 33.1733 10.0479 33.1973 11.3599C33.2524 14.312 34.4736 16.6641 36.8999 18.3359C37.1758 18.5278 37.2466 18.7197 37.1597 19C36.9946 19.5757 36.7974 20.1357 36.624 20.7119C36.5137 21.0801 36.3486 21.1597 35.9624 21C34.6309 20.4321 33.481 19.5918 32.4644 18.5757C30.7393 16.8721 29.1792 14.9917 27.2334 13.52C26.7764 13.1758 26.3193 12.856 25.8467 12.5518C23.8618 10.584 26.1069 8.96777 26.627 8.77588C27.1704 8.57568 26.8159 7.8877 25.0591 7.896C23.3022 7.90381 21.6953 8.50391 19.647 9.30371C19.3477 9.42383 19.0322 9.51172 18.7095 9.58398C16.8501 9.22363 14.9199 9.14355 12.9033 9.37598C9.10596 9.80762 6.07275 11.6396 3.84326 14.7681C1.16455 18.5278 0.53418 22.7998 1.30664 27.2559C2.11768 31.9521 4.46582 35.8398 8.07373 38.8799C11.8159 42.0322 16.1255 43.5762 21.041 43.2803C24.0269 43.104 27.3516 42.6963 31.1016 39.4561C32.0469 39.936 33.0396 40.1279 34.686 40.272C35.9546 40.3921 37.1758 40.208 38.1211 40.0078C39.6021 39.688 39.4995 38.2881 38.9639 38.0322C34.623 35.9678 35.5762 36.8081 34.71 36.1279C36.9155 33.4639 40.2402 30.6958 41.54 21.728C41.6426 21.0161 41.5557 20.5679 41.54 19.9917C41.5322 19.6396 41.6108 19.5039 42.0049 19.4639C43.0923 19.3359 44.1479 19.0317 45.1167 18.4878C47.9292 16.9199 49.064 14.3438 49.3315 11.2559C49.3711 10.7837 49.3237 10.2959 48.8354 10.0479ZM24.3262 37.8398C20.1196 34.4639 18.0791 33.3521 17.2358 33.3999C16.4482 33.4482 16.5898 34.3682 16.7632 34.9678C16.9443 35.5601 17.1812 35.9683 17.5117 36.4878C17.7402 36.832 17.8979 37.3442 17.2832 37.728C15.9282 38.584 13.5728 37.4399 13.4624 37.3838C10.7207 35.7358 8.42822 33.5601 6.81348 30.584C5.25342 27.7197 4.34766 24.6479 4.19775 21.3677C4.1582 20.5757 4.38672 20.2959 5.15869 20.1519C6.17529 19.96 7.22314 19.9199 8.23926 20.0718C12.5327 20.7119 16.1885 22.6719 19.2529 25.7759C21.002 27.5439 22.3252 29.6558 23.6885 31.7202C25.1377 33.9121 26.6978 36 28.6831 37.7119C29.3843 38.312 29.9434 38.7681 30.479 39.104C28.8643 39.2881 26.1699 39.3281 24.3262 37.8398ZM26.3433 24.6001C26.3433 24.248 26.6191 23.9678 26.9658 23.9678C27.0444 23.9678 27.1152 23.9839 27.1782 24.0078C27.2651 24.04 27.3438 24.0879 27.4067 24.1602C27.5171 24.272 27.5801 24.4321 27.5801 24.6001C27.5801 24.9521 27.3042 25.2319 26.9575 25.2319C26.6108 25.2319 26.3433 24.9521 26.3433 24.6001ZM32.6064 27.8799C32.2046 28.0479 31.8027 28.1919 31.4165 28.208C30.8179 28.2397 30.1641 27.9922 29.8096 27.688C29.2583 27.2158 28.8643 26.9521 28.6987 26.1279C28.6279 25.7759 28.6675 25.2319 28.7305 24.9199C28.8721 24.248 28.7144 23.8159 28.2495 23.4238C27.8716 23.104 27.3911 23.0161 26.8633 23.0161C26.666 23.0161 26.4849 22.9277 26.3511 22.856C26.1304 22.7441 25.9492 22.4639 26.1226 22.1201C26.1777 22.0078 26.4458 21.7358 26.5088 21.688C27.2256 21.272 28.0527 21.4077 28.8169 21.7197C29.5259 22.0161 30.0615 22.5601 30.834 23.3281C31.6216 24.2559 31.7632 24.5117 32.2124 25.208C32.5669 25.752 32.8901 26.312 33.1104 26.9521C33.2446 27.3521 33.0713 27.6802 32.6064 27.8799Z",fill:"#4D6BFE",fillOpacity:"1.000000",fillRule:"nonzero"})})},E=e=>{let{size:t=20}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-panel-left-close-icon lucide-panel-left-close",children:[(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),(0,n.jsx)("path",{d:"M9 3v18"}),(0,n.jsx)("path",{d:"m16 15-3-3 3-3"})]})},L=e=>{let{size:t=20}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-panel-left-open-icon lucide-panel-left-open",children:[(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),(0,n.jsx)("path",{d:"M9 3v18"}),(0,n.jsx)("path",{d:"m14 9 3 3-3 3"})]})};var M=l(37257),F=l(38430);l(36633);let I=e=>{let t=new(l(39022))({html:!0,breaks:!0,highlight:function(e,l){if(l&&F.A.getLanguage(l))try{return'<pre class="hljs"><code>'.concat(F.A.highlight(e,{language:l,ignoreIllegals:!0}).value,"</code></pre>")}catch(e){}return'<pre class="hljs"><code>'.concat(t.utils.escapeHtml(e),"</code></pre>")}});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.A,{children:(0,n.jsx)("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:t.render(e.content)}})})})};var Z=l(50626),D=l(48171),W=l(76754),q=l(77133),H=l(9622),O=l(79228),U=l(88799),G=l(44318),K=l(83607);let Y=e=>{let{text:t}=e,[l,i]=(0,s.useState)(""),[r,o]=(0,s.useState)(!1),[a,c]=(0,s.useState)(150);return(0,s.useEffect)(()=>{let e;return!r&&l.length<t.length?e=setTimeout(()=>{i(t.substring(0,l.length+1))},a):l.length!==t.length||r?r&&l.length>0?e=setTimeout(()=>{i(t.substring(0,l.length-1))},a/2):r&&0===l.length&&(e=setTimeout(()=>{o(!1),c(150+100*Math.random())},1e3)):e=setTimeout(()=>o(!0),2e3),()=>clearTimeout(e)},[l,r,a,t]),(0,n.jsx)("span",{children:l})},V=(e,t)=>(0,n.jsxs)(A.A,{align:"start",children:[e,(0,n.jsx)("span",{children:t})]}),X=[{key:"1",label:V((0,n.jsx)(W.A,{style:{color:"#FF4D4F"}}),"热门话题"),description:"你对什么感兴趣",children:[{key:"1-1",description:"你能做什么？"},{key:"1-2",description:"什么是 AGI？"},{key:"1-3",description:"免费吗？"}]},{key:"2",label:V((0,n.jsx)(q.A,{style:{color:"#1890FF"}}),"设计指南"),description:"如何设计出好产品?",children:[{key:"2-1",icon:(0,n.jsx)(H.A,{}),description:"设计网页"},{key:"2-2",icon:(0,n.jsx)(O.A,{}),description:"角色扮演"},{key:"2-3",icon:(0,n.jsx)(U.A,{}),description:"表达感受"}]}],J=e=>(0,n.jsxs)(A.A,{className:"pt-10",direction:"vertical",size:16,children:[(0,n.jsx)(Z.A,{variant:"borderless",icon:"https://pic1.imgdb.cn/item/67d83ea588c538a9b5c00209.gif",title:"你好，欢迎来到知无涯的DeepSeek   U•ェ•*U",description:(0,n.jsx)(Y,{text:"愿你踏遍山河万里，览尽世间繁华，再以澄明之心，品评人间百态（〃｀ 3′〃）"}),extra:(0,n.jsxs)(A.A,{children:[(0,n.jsx)(p.Ay,{icon:(0,n.jsx)(G.A,{})}),(0,n.jsx)(p.Ay,{icon:(0,n.jsx)(K.A,{})})]})}),(0,n.jsx)(D.A,{title:"不知道要做什么？",items:X,styles:{list:{width:"100%"},item:{flex:1}},onItemClick:t=>{let{data:l}=t;l.description&&e.handleSubmit(l.description.toString())}})]});var Q=l(66766);let $=()=>(0,n.jsx)("div",{className:"w-12 ml-1.5",children:(0,n.jsx)(Q.default,{className:"dark:invert",src:"/67d83e9488c538a9b5c001fc.svg",alt:"ZHIWUYA logo",width:38,height:38,priority:!0})});var ee=l(83730),et=l(19696),el=l(27540);let en=[{key:"logout",label:"退出AI",icon:(0,n.jsx)(el.A,{}),onClick:()=>window.open("https://zhiheya.github.io/","_blank")}],es=e=>{let{children:t}=e;return(0,n.jsx)("div",{children:(0,n.jsx)(et.A,{menu:{items:en},placement:"bottom",children:t})})};var ei=l(54618);let{useToken:er}=h.A,eo=()=>{let{token:e}=er();return(0,n.jsx)(ei.P.Consumer,{children:t=>!t.isMobile&&(0,n.jsx)(g.A,{justify:"center",style:{marginTop:"-8px",padding:"3px 0",backgroundColor:e.colorBgBase},children:(0,n.jsx)(y.A.Text,{type:"secondary",children:"当前页面为测试页面，部分功能还在开发，敬请期待(❤ ω ❤)"})})})};var ea=l(35450),ec=l(38753),ed=l(80898),ex=l(6874),eh=l.n(ex);let eu=e=>e.headerProps.isMobile?[]:[(0,n.jsx)(p.Ay,{type:"text",shape:"circle",onClick:()=>null==e?void 0:e.setDark(!e.dark),children:e.dark?(0,n.jsx)(ea.A,{style:{fontSize:"18px"}}):(0,n.jsx)(ec.A,{style:{fontSize:"18px"}})},"dark"),(0,n.jsx)(eh(),{href:"https://zhiheya.github.io/",target:"_blank",children:(0,n.jsx)(p.Ay,{type:"text",shape:"circle",children:(0,n.jsx)(ed.A,{style:{fontSize:"18px"}})},"github")},"github_link")];var ep=l(56508);let eg=(0,i.default)(()=>l.e(40).then(l.bind(l,60040)).then(e=>e.ProLayout),{loadableGenerated:{webpack:()=>[60040]},ssr:!1}),{useToken:ej}=h.A,em=[],eC="deepseek-chat",ey=new M.Ay({baseURL:"https://api.deepseek.com/v1",apiKey:"sk-bc8b7a4b8be04873b9f35435ec6c130c",dangerouslyAllowBrowser:!0}),eA=()=>{let{token:e}=ej(),[t,l]=(0,s.useState)(!1),[i,M]=(0,s.useState)(em),[F,Z]=(0,s.useState)(""),[D,W]=(0,s.useState)(!1),[q,H]=(0,s.useState)(""),[O,U]=(0,s.useState)(!1),[G,K]=(0,s.useState)(!1),[Y,V]=(0,s.useState)(eC),X=(0,s.useRef)(Y),Q=(0,s.useRef)(null),[et,el]=(0,s.useState)(!1),en={algorithm:t?h.A.darkAlgorithm:h.A.defaultAlgorithm,token:{colorPrimary:e.colorPrimary}},ei={pageContainer:{colorBgPageContainer:t?"":e.colorBgBase,paddingBlockPageContainerContent:10,paddingInlinePageContainerContent:5}},er=(0,n.jsx)(u.A,{title:et?"打开边栏":"收起边栏",placement:"right",children:(0,n.jsx)(p.Ay,{styles:{icon:{color:"#676767"}},type:"text",icon:et?(0,n.jsx)(L,{}):(0,n.jsx)(E,{}),onClick:()=>el(!et)})}),ea=()=>{H(""),ek([])},ec=e=>{M([{key:"".concat(i.length+1),label:e},...i]),H("".concat(i.length+1))},ed=e=>({items:[{label:"重命名",key:"rename",icon:(0,n.jsx)(v.A,{})},{label:"删除",key:"delete",icon:(0,n.jsx)(f.A,{}),danger:!0}],onClick:t=>{let l;if(t.domEvent.stopPropagation(),"rename"===t.key){var s;j.A.confirm({title:"重命名会话",content:(0,n.jsx)(m.A,{placeholder:"请输入新的会话名称",defaultValue:null===(s=e.label)||void 0===s?void 0:s.toString(),onChange:t=>{let n=t.target.value;l=i.map(t=>t.key===e.key?{...t,label:n}:t)}}),onOk:()=>{M(l),C.Ay.success("重命名成功")},onCancel:()=>{C.Ay.info("取消重命名")}})}"delete"===t.key&&j.A.confirm({title:"永久删除对话",content:"删除后，该对话不可恢复，确认删除吗？",okType:"danger",okText:"删除",onOk:()=>{let t=i.filter(t=>t.key!==e.key);M(t),q===e.key&&H(t.length>0?t[0].key:""),C.Ay.success("删除成功")}})}}),[ex]=(0,o.A)({request:async(e,t)=>{let{message:l,messages:n}=e,{onUpdate:s,onSuccess:i,onError:r}=t;console.log("message: ",l),console.log("message list: ",n),console.log("model: ",X.current);let o={content:"",reasoningContent:""};try{var a,c,d,x,h,u,p;for await(let e of(await ey.chat.completions.create({model:X.current,messages:[{role:"user",content:(null==l?void 0:l.content)||""}],stream:!0},{signal:null===(a=Q.current)||void 0===a?void 0:a.signal}))){W(!1);let t=(null===(d=e.choices[0])||void 0===d?void 0:null===(c=d.delta)||void 0===c?void 0:c.reasoning_content)||(null===(h=e.choices[0])||void 0===h?void 0:null===(x=h.delta)||void 0===x?void 0:x.reasoning),l=null===(p=e.choices[0])||void 0===p?void 0:null===(u=p.delta)||void 0===u?void 0:u.content;t&&(o.reasoningContent+=t),l&&(o.content+=l),s(o)}i(o)}catch(e){console.log("error",e),r(e)}finally{W(!1)}}}),{onRequest:eh,messages:eA,setMessages:ek}=(0,a.A)({agent:ex,requestPlaceholder:{content:"请求中..."}});(0,s.useEffect)(()=>{let e=G?"deepseek-reasoner":eC;V(e),X.current=e,console.log("set model:",e)},[G]),(0,s.useEffect)(()=>{X.current=Y},[Y]);let ev=t=>{let{reasoningContent:l}=t,[i,r]=(0,s.useState)(!0);return l&&(0,n.jsxs)(g.A,{vertical:!0,children:[(0,n.jsxs)(p.Ay,{style:{width:"130px",marginBottom:"5px",borderRadius:e.borderRadiusLG},color:"default",variant:"filled",onClick:()=>r(!i),children:[(0,n.jsx)(b.A,{}),"深度思考",i?(0,n.jsx)(w.A,{style:{fontSize:"10px"}}):(0,n.jsx)(S.A,{style:{fontSize:"10px"}})]}),i&&(0,n.jsx)("div",{className:"max-w-[600px] border-l-2 border-l-gray-100 my-2 mr-2 pl-4",children:(0,n.jsx)(y.A.Text,{type:"secondary",children:l})})]})},ef=e=>{let{message:t}=e;return(0,n.jsxs)(A.A,{children:[(0,n.jsx)(u.A,{title:"喜欢",children:(0,n.jsx)(p.Ay,{size:"small",type:"text",icon:(0,n.jsx)(R.A,{}),onClick:()=>C.Ay.success("感谢您的支持")})}),(0,n.jsx)(u.A,{title:"不喜欢",children:(0,n.jsx)(p.Ay,{size:"small",type:"text",icon:(0,n.jsx)(N.A,{}),onClick:()=>C.Ay.info("感谢您的反馈")})}),(0,n.jsx)(u.A,{title:"复制",children:(0,n.jsx)(p.Ay,{size:"small",type:"text",icon:(0,n.jsx)(z.A,{}),onClick:()=>{(0,ep.x3)(t),C.Ay.success("已复制")}})})]})},eb=eA.map(e=>{let{id:t,message:l,status:s}=e;return{key:t,content:l.content||"",role:"local"===s?"user":"ai",loading:"loading"===s&&D,header:"local"!==s&&(0,n.jsx)(ev,{reasoningContent:l.reasoningContent||""}),footer:!ex.isRequesting()&&"local"!==s&&(0,n.jsx)(ef,{message:l.content||""}),placement:"local"!==s?"start":"end",variant:"local"!==s?l.content?"outlined":"borderless":void 0,avatar:"local"!==s?{icon:(0,n.jsx)(_,{}),style:{border:"1px solid #c5eaee",backgroundColor:"white"}}:void 0,typing:"local"!==s&&"loading"===s&&D?{step:5,interval:50}:void 0,style:"local"!==s?{maxWidth:700}:void 0,messageRender:"local"!==s?e=>(0,n.jsx)(I,{content:e}):void 0}}),ew=e=>{eh({content:e}),Z(""),W(!0),q||ec(e)},eS=eb.length>0?eb:[{content:(0,n.jsx)(J,{handleSubmit:ew}),variant:"borderless"}];return(0,s.useEffect)(()=>(Q.current=new AbortController,()=>{var e;null===(e=Q.current)||void 0===e||e.abort("停止")}),[]),(0,n.jsx)(P.Z,{children:(0,n.jsx)(c.Ay,{locale:ee.A,theme:en,children:(0,n.jsxs)(eg,{className:"h-lvh",token:ei,pure:!1,navTheme:"light",layout:"side",siderWidth:250,logo:(0,n.jsx)($,{}),title:"ZHI WU YA",menuHeaderRender:(e,t,l)=>(0,n.jsxs)(g.A,{align:"center",children:[e,(0,n.jsx)("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-500",children:t})]}),menuExtraRender:e=>(0,n.jsx)(n.Fragment,{children:e.collapsed?(0,n.jsx)(u.A,{title:"开启新对话",placement:"right",children:(0,n.jsx)(p.Ay,{style:{backgroundColor:"#1677ff0f",border:"1px solid #1677ff34",borderRadius:"10px",width:" 35px",margin:"5px -7px"},type:"link",icon:(0,n.jsx)(k.A,{}),onClick:ea})}):(0,n.jsx)(p.Ay,{className:"h-35 w-[calc(100%-25px)] ml-3 m-4",style:{backgroundColor:"#1677ff0f",border:"1px solid #1677ff34",borderRadius:"10px"},type:"link",icon:(0,n.jsx)(k.A,{}),onClick:ea,children:"开启新对话"})}),menuContentRender:(e,t)=>(0,n.jsx)(n.Fragment,{children:!e.collapsed&&(0,n.jsx)("div",{className:"h-full px-1 overflow-y-auto scrollbar-container",children:(0,n.jsx)(r.A,{items:i,menu:ed,activeKey:q,onActiveChange:H})})}),actionsRender:e=>(0,n.jsx)(eu,{headerProps:e,dark:t,setDark:l}),avatarProps:{src:"https://pic1.imgdb.cn/item/67d83e9488c538a9b5c001fc.jpg",size:"small",title:"知无涯",render:(e,t)=>(0,n.jsx)(es,{children:t})},footerRender:()=>(0,n.jsx)(eo,{}),collapsedButtonRender:!1,collapsed:et,onCollapse:el,children:[(0,n.jsx)("div",{className:"fixed z-10 h-12 w-12",children:er}),(0,n.jsxs)(g.A,{vertical:!0,gap:"large",className:"w-full",style:{margin:"0px auto",height:"94.5vh"},children:[(0,n.jsx)("div",{className:"h-full w-full px-1 overflow-y-auto scrollbar-container",children:(0,n.jsx)(d.A.List,{className:"max-w-2xl  mx-auto",items:eS})}),(0,n.jsx)(x.A,{className:"max-w-2xl mx-auto",style:{marginTop:"auto",borderRadius:"20px"},autoSize:{minRows:2,maxRows:8},placeholder:"请输入你的问题...",loading:ex.isRequesting(),value:F,onChange:Z,onSubmit:ew,onCancel:()=>{var e;W(!1),null===(e=Q.current)||void 0===e||e.abort("停止"),C.Ay.error("已停止")},actions:!1,footer:e=>{let{components:t}=e,{SendButton:l,LoadingButton:s,SpeechButton:i}=t;return(0,n.jsxs)(g.A,{justify:"space-between",align:"center",children:[(0,n.jsxs)(g.A,{gap:"small",children:[(0,n.jsx)(u.A,{title:G?"":"调用新模型 DeepSeek-R1，解决推理问题",placement:"left",children:(0,n.jsxs)(p.Ay,{size:"small",shape:"round",type:G?"primary":"default",onClick:()=>K(!G),children:[(0,n.jsx)(b.A,{}),"深度思考(R1)"]})}),(0,n.jsx)(u.A,{title:O?"":"按需搜索网页",placement:"right",children:(0,n.jsxs)(p.Ay,{size:"small",shape:"round",type:O?"primary":"default",onClick:()=>U(!O),children:[(0,n.jsx)(T.A,{}),"联网搜索"]})})]}),(0,n.jsxs)(g.A,{align:"center",gap:"small",children:[(0,n.jsx)(u.A,{title:"上传附件",placement:"top",children:(0,n.jsx)(p.Ay,{type:"text",icon:(0,n.jsx)(B.A,{rotate:135,style:{fontSize:"18px",marginTop:"7px"}})})}),ex.isRequesting()?(0,n.jsx)(u.A,{title:"停止",children:(0,n.jsx)(s,{})}):(0,n.jsx)(u.A,{title:F?"发送":"请输入你的问题",children:(0,n.jsx)(l,{})})]})]})}})]})]})})})}},66959:(e,t,l)=>{Promise.resolve().then(l.bind(l,33022))}},e=>{var t=t=>e(e.s=t);e.O(0,[80,825,151,441,684,358],()=>t(66959)),_N_E=e.O()}]);